# GitHub Copilot Instructions

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ GitHub Copilot ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã—ã€ã‚ˆã‚Šé©åˆ‡
ãªã‚³ãƒ¼ãƒ‰ææ¡ˆã‚’è¡Œã†ãŸã‚ã®æŒ‡ç¤ºæ›¸ã§ã™ã€‚

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: sado-kueccha **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: React 19 + TypeScript +
Vite + Vitest **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**: pnpm **ç”¨é€”**: ä½æ¸¡å³¶ã®è¦³å…‰åœ°ãƒãƒƒãƒ—ã‚¢
ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ› ï¸ æŠ€è¡“ä»•æ§˜

### ä¸»è¦æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React 19.1.0, TypeScript ~5.8.3
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite ^6.3.5
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest ^3.1.4, @testing-library/react ^16.3.0
- **åœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: @vis.gl/react-google-maps ^1.5.2,
  @googlemaps/markerclusterer ^2.5.3
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: CSS Modules + ç´”ç²‹ CSS
- **ãƒªãƒ³ã‚¿ãƒ¼**: ESLint ^9.28.0 (Flat Config)
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼**: Prettier

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ app/                    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ components/            # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ filter/           # ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
â”‚   â”œâ”€â”€ map/              # åœ°å›³é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ shared/           # å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ ui/               # UIãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–
â”œâ”€â”€ constants/            # å®šæ•°å®šç¾©
â”œâ”€â”€ hooks/                # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ services/             # APIãƒ»ãƒ‡ãƒ¼ã‚¿å–å¾—
â”œâ”€â”€ styles/               # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ»å…±é€šã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ types/                # TypeScriptå‹å®šç¾©
â”œâ”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â””â”€â”€ workers/              # Web Workers
```

## ğŸ“‹ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### TypeScript

- **Strict Mode**: å¸¸ã«æœ‰åŠ¹ã€å‹å®‰å…¨æ€§ã‚’æœ€å„ªå…ˆ
- **ç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã¯ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨
- **ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹**: `@/*` ã‚’ src/ ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦ä½¿ç”¨
- **å‹å®šç¾©**: å¯èƒ½ãªé™ã‚Šæ˜ç¤ºçš„ãªå‹å®šç¾©ã‚’è¨˜è¿°
- **Interface vs Type**: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¯ interfaceã€è¨ˆç®—å‹ã«ã¯ type ã‚’ä½¿ç”¨

```typescript
// âœ… æ¨å¥¨
interface POI {
  id: string;
  name: string;
  coordinates: [number, number];
  category: POICategory;
}

// âœ… æ¨å¥¨
type FilterState = 'active' | 'inactive' | 'pending';
```

### React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- **é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: å¸¸ã«é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
- **ãƒ•ãƒƒã‚¯**: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¯ `use` ã§é–‹å§‹
- **Props**: æ˜ç¤ºçš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
- **ãƒ¡ãƒ¢åŒ–**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦ãªéƒ¨åˆ†ã§ React.memo, useMemo, useCallback ã‚’é©
  åˆ‡ã«ä½¿ç”¨
- **ãƒ•ã‚¡ã‚¤ãƒ«å‘½å**: PascalCase ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåã¨ä¸€è‡´

```typescript
// âœ… æ¨å¥¨
interface MapProps {
  markers: POI[];
  onMarkerClick: (poi: POI) => void;
  className?: string;
}

export const Map: React.FC<MapProps> = ({
  markers,
  onMarkerClick,
  className,
}) => {
  // å®Ÿè£…
};
```

### CSSãƒ»ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

- **CSS Modules**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ã®ã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†
- **BEM è¨˜æ³•**: CSS ã‚¯ãƒ©ã‚¹åã®å‘½åè¦å‰‡
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: critical.css ã§ã®é‡è¦ã‚¹ã‚¿ã‚¤ãƒ«ã®åˆ†é›¢
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«**: styles/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ»æ©Ÿèƒ½åˆ¥
  CSS ç®¡ç†

```css
/* âœ… æ¨å¥¨: MapComponent.module.css */
.container {
  width: 100%;
  height: 100vh;
}

.marker {
  cursor: pointer;
  transition: transform 0.2s ease;
}

.marker:hover {
  transform: scale(1.1);
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- **ä»®æƒ³åŒ–**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºæ™‚ã¯ VirtualList ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
- **é…å»¶èª­ã¿è¾¼ã¿**: React.lazy + Suspense ã§ã®å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- **ãƒãƒƒãƒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: useBatchRendering ãƒ•ãƒƒã‚¯ã§ã®æç”»æœ€é©åŒ–
- **Web Workers**: é‡ã„å‡¦ç†ã¯ workers/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§å®Ÿè£…

### ãƒ†ã‚¹ãƒˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `*.test.tsx` ã¾ãŸã¯ `*.test.ts`
- **ãƒ†ã‚¹ãƒˆé…ç½®**: src/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«éš£æ¥
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å¿…ãšãƒ†ã‚¹ãƒˆ
- **MSW**: API ãƒ¢ãƒƒã‚¯ã«ã¯ Mock Service Worker ã‚’ä½¿ç”¨

```typescript
// âœ… æ¨å¥¨
describe("MapComponent", () => {
  it("should render markers correctly", () => {
    const markers = [
      /* ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ */
    ];
    render(<Map markers={markers} onMarkerClick={vi.fn()} />);
    expect(screen.getAllByRole("button")).toHaveLength(markers.length);
  });
});
```

## ğŸ¯ GitHub Copilot å‘ã‘ç‰¹åˆ¥æŒ‡ç¤º

### ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®å„ªå…ˆäº‹é …

1. **å‹å®‰å…¨æ€§**: å¿…ãšå‹å®šç¾©ã‚’å«ã‚€ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ¡ãƒ¢åŒ–ã‚„ãƒãƒƒãƒå‡¦ç†ã‚’è€ƒæ…®
3. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ARIA å±æ€§ã‚„ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ HTML ã‚’ä½¿ç”¨
4. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼å¢ƒç•Œã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
5. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„æ§‹é€ ã§ã®å®Ÿè£…

### é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³

- âŒ `any` å‹ã®ä½¿ç”¨
- âŒ ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ stylesï¼ˆCSS Modules ã‚’ä½¿ç”¨ï¼‰
- âŒ ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- âŒ jQuery ã‚„ DOM ç›´æ¥æ“ä½œ
- âŒ console.log ã®ã‚³ãƒŸãƒƒãƒˆï¼ˆé–‹ç™ºæ™‚ã®ã¿ä½¿ç”¨ï¼‰

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è€ƒæ…®äº‹é …

#### åœ°å›³æ©Ÿèƒ½

- **Google Maps API**: @vis.gl/react-google-maps ã‚’ä½¿ç”¨
- **ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°**: @googlemaps/markerclusterer ã§å®Ÿè£…
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å¤§é‡ãƒãƒ¼ã‚«ãƒ¼ã®å ´åˆã¯ incrementalRendering ã‚’é©ç”¨

#### ãƒ‡ãƒ¼ã‚¿ç®¡ç†

- **POI ãƒ‡ãƒ¼ã‚¿**: Google Sheets API çµŒç”±ã§å–å¾—
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: services/cache.ts ã§ã®åŠ¹ç‡çš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: Web Workers ã§ã®éåŒæœŸå‡¦ç†

#### å–¶æ¥­æ™‚é–“å‡¦ç†

- **æ—¥æœ¬ã®ç¥æ—¥**: japanese-holidays ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨
- **å–¶æ¥­æ™‚é–“åˆ¤å®š**: utils/businessHours.ts ã®é–¢æ•°ã‚’æ´»ç”¨
- **ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³**: æ—¥æœ¬æ™‚é–“ï¼ˆJSTï¼‰ã§çµ±ä¸€

### ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```typescript
/**
 * POIï¼ˆPoint of Interestï¼‰ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 *
 * @param poi - è¡¨ç¤ºã™ã‚‹POIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 * @param onClose - ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹éš›ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
 * @param isVisible - ãƒ¢ãƒ¼ãƒ€ãƒ«ã®è¡¨ç¤ºçŠ¶æ…‹
 */
interface POIDetailProps {
  poi: POI;
  onClose: () => void;
  isVisible: boolean;
}
```

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `pnpm type-check` ã§ TypeScript ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] `pnpm lint` ã§ ESLint ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] `pnpm test` ã§ãƒ†ã‚¹ãƒˆé€šé
- [ ] æ–°è¦æ©Ÿèƒ½ã«ã¯ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿ã®ç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: 500KB ä»¥ä¸‹ã‚’ç¶­æŒ
- **åˆæœŸè¡¨ç¤º**: 3 ç§’ä»¥å†…
- **ãƒãƒ¼ã‚«ãƒ¼æç”»**: 1000 å€‹ã¾ã§æ»‘ã‚‰ã‹ã«è¡¨ç¤º
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: 100ms ä»¥å†…ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹

### ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ

- **ç¾ä»£ãƒ–ãƒ©ã‚¦ã‚¶**: Chrome, Firefox, Safari, Edgeï¼ˆæœ€æ–°ç‰ˆï¼‰
- **ãƒ¢ãƒã‚¤ãƒ«**: iOS Safari, Chrome Mobile
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: 320pxã€œ1920px ã®å¹…ã«å¯¾å¿œ

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [React 19 Documentation](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Vite Guide](https://vitejs.dev/guide/)
- [Vitest Documentation](https://vitest.dev/)
- [Google Maps Platform](https://developers.google.com/maps/documentation)

---

**ã“ã®æŒ‡ç¤ºãƒ•ã‚¡ã‚¤ãƒ«ã«å¾“ã£ã¦ã€ä¸€è²«æ€§ã®ã‚ã‚‹é«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚**
